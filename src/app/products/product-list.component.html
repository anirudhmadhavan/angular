<div class="card">
   <div class="card-header">
      {{ pageTitle }}
   </div>
</div>

<div class="card-body">
   <div class="row">
      <div class="col-md-2">Filter by:</div>
      <div class="col-md-4">
         <!-- Two way binding - use for input fields since we are displaying back on template (refer below)-->
         <input [(ngModel)]="filteredBy" type="text" />
      </div>
   </div>
   <div class="row">
      <div class="col-md-2">
         <!-- Input field - after 2 way binding takes effect, comes back to template-->
         <h4>Filtered by: {{ filteredBy }}</h4>
      </div>
   </div>
</div>

<div class="table-responsive" *ngIf="filteredProducts && filteredProducts.length > 0">
   <table class="table">
      <thead>
         <tr>
            <th>
               <!--Event binding as soon as button is called - method is called-->
               <button class="btn btn-primary" (click)="toggleImage()">
                  {{ showImage ? 'Hide' : 'Show' }} Image
               </button>
            </th>
            <th>Product</th>
            <th>Code</th>
            <th>Available</th>
            <th>Price</th>
            <th>5 Star Rating</th>
         </tr>
      </thead>
      <tbody>
         <tr *ngFor="let product of filteredProducts">
            <td>
               <!-- Property binding - src, title-->
               <!-- Using ngIf on showImage to see if img tag has to be rendered or not-->
               <img
                  *ngIf="showImage"
                  [src]="product.imageUrl"
                  [title]="product.productName"
                  [style.width.px]="imageWidth"
                  [style.margin.px]="imageMargin"
               />
            </td>
            <!--Using routerLink to route to product detail page, passing product ID to the routed component-->
            <td>
               <a [routerLink]="['/product', product.productId]">{{ product.productName }}</a>
            </td>
            <!-- Custom pipe with pipe paramters, can use multiple pipes-->
            <td>{{ product.productCode | lowercase | ConvertToSpaces: '-' }}</td>
            <td>{{ product.releaseDate }}</td>
            <td>{{ product.price | currency: 'USD':'symbol':'1.2-2' }}</td>
            <td>
               <!-- Nested star component, passing property rating and listening to event, $event is payload from child's event-->
               <star [rating]="product.starRating" (childEvent)="childEvent($event)"></star>
            </td>
         </tr>
      </tbody>
   </table>
</div>
